(o=>{const i={totalSec:0,lastTimestamp:0,el:document.createElement("span"),isHidden:!1,initiate:function(){const t=document.createElement("div");t.title="Click to hide, F5 to show again. You can also disable this feature in the extension (J2TEAM Security) options.",t.id="j2team_fb_timer",t.style.cssText="position: fixed;bottom: 52px;left: 15px;text-shadow: 2px 2px 8px rgba(150, 150, 150, 0.9);color: #fff;padding: 5px 8px;background-color: #000;border-radius: 10px;opacity: 0.7;font-size: 18px;",document.querySelector("#facebook.__fb-dark-mode")!==null&&(t.style.color="rgb(0 255 78)"),this.el=document.createElement("span"),this.el.classList.add("j2team_timer"),this.el.textContent="00:00:00",t.appendChild(this.el),document.body.appendChild(t),t.addEventListener("click",()=>{t.style.display="none",this.isHidden=!0}),this.loaded()},loaded:function(){o.storage.local.get({fb_timer_second:null,fb_timer_date:null},t=>{let e=1+parseInt(t.fb_timer_second);this.totalSec=e||0,this.lastTimestamp=t.fb_timer_date||this.getTimestamp(),this.track(),this.autoSave(),window.addEventListener("unload",i.autoSave.bind(i),!1)})},track:function(){let t;(t=this.getTimestamp())!==this.lastTimestamp.toString()&&(this.totalSec=0),this.totalSec++,this.lastTimestamp=Number(t),this.update(),this.isHidden||window.setTimeout(i.track.bind(i),1e3)},update:function(){let t,e,a;t=Math.floor(this.totalSec/3600),e=Math.floor((this.totalSec-t*3600)/60),a=this.totalSec-e*60-t*3600,t<10&&(t=`0${t}`),e<10&&(e=`0${e}`),a<10&&(a=`0${a}`),this.el.textContent=`${t}:${e}:${a}`},getTimestamp:function(){let t=new Date;return[t.getFullYear(),t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,t.getDate()<10?"0"+t.getDate():t.getDate()].join("")},autoSave:function(){try{o.storage.local.set({fb_timer_second:this.totalSec,fb_timer_date:this.lastTimestamp})}catch{}window.setTimeout(i.autoSave.bind(i),3e4)}};o.storage.sync.get({show_facebook_time_counter:!1},t=>{t.show_facebook_time_counter&&i.initiate()})})(chrome);
